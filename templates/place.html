<!-- templates/place.html -->

{% if place|length>0 %}

    <tr class="bg-white lg:hover:bg-gray-100 flex lg:table-row flex-row lg:flex-row flex-wrap lg:flex-no-wrap mb-10 lg:mb-0">
        <td class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static">{{ place['formatted_address'] }}</td>
        <td class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static">{{ place['name'] }}</td>
        <td class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static">
            <button onclick="location.href='{{ url_for('chartpage',my_var=shortest[0]) }}'"
                    class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                {{ shortest[0] }}
            </button>
        </td>
        <td class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static">
            <button onclick="location.href='{{ url_for('chartpage',my_var=shortest[1]) }}'"
                    class="bg-purple-400 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">
                {{ shortest[1] }}
            </button>
        </td>
        <td class="w-full lg:w-auto p-3 text-gray-800 text-center border border-b block lg:table-cell relative lg:static">
            <button onclick="location.href='{{ url_for('chartpage',my_var=shortest[2]) }}'"
                    class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                {{ shortest[2] }}
            </button>
        </td>
    </tr>
    <tr>
        <td colspan="1">
            <div id="table_map" class="mx-auto" >
                <iframe
                  width=100%
                  height="370"
                  style="border:0"
                  loading="lazy"
                  allowfullscreen
                  src="https://www.google.com/maps/embed/v1/place?key={{map_src}}">
                </iframe>
            </div>
        </td>
        <td colspan="4">
            <!-- chart -->
            <div class="container mx-auto bg-yellow-100 rounded-lg shadow-xl hover:bg-yellow-200" >
                <div class="container mx-auto flex justify-center">
                    <div>
                        <p class="-top-0 p-3 font-bold text=center text-5xl text-green-700">
                            Available spaces
                        </p>
                    </div>
                </div>


                <div>

                    <canvas id="myChart" width="400" height="300"></canvas>

                </div>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

                <script>


                    const data = {
                        labels: {{ chart_data[0][1] }},
                        datasets: [{
                            label: '{{shortest[0]}}',
                            backgroundColor: 'rgb(58,129,245)',
                            borderColor: 'rgb(58,129,245)',
                            data: {{ chart_data[0][0] }},
                        },
                        {
                            label: '{{shortest[1]}}',
                            backgroundColor: 'rgb(166,138,249)',
                            borderColor: 'rgb(166,138,249)',
                            data: {{ chart_data[1][0] }},
                        },
                        {
                            label: '{{shortest[2]}}',
                            backgroundColor: 'rgb(237,66,67)',
                            borderColor: 'rgb(237,66,67)',
                            data: {{ chart_data[2][0] }},
                        }]
                    };
                    const config = {
                        type: 'line',
                        data: data,
                        options: {
                            cubicInterpolationMode: "monotone",
                            maintainAspectRatio: false,
                            responsive: true,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                'time-axis': {
                                    type: 'linear',
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: "lots available"
                                    }

                                },

                                xAxes: [{
                                    type: 'time',
                                    time: {
                                        unit: 'hour'
                                    },
                                    title: {
                                        display: true,
                                        text: "time"
                                    }
                                }]
                            }
                        }
                    };
                    var myChart = new Chart(
                        document.getElementById('myChart'),
                        config
                    );
                </script>
            </div>


        </td>

    </tr>




{% endif %}
